<script>
    function message_error(obj){
        var html = '';
        if (typeof (obj) === 'object'){
            html = '<ul style="text-align: left;">'; 
            $.each(obj, function(key, value){
                html += '<li>' + key + ': ' +  value + '</li>'; 
            });
            html += '</ul>';
        } else {
            html = '<p>' + obj + '</p>';
        }
        html += '</ul>';
        Swal.fire({
            title : 'Error',
            html : html,
            icon : 'error',
            confirmButtonColor: '#3085d6',

        });
    }

    function submit_with_ajax(url,title,content,parameters,callback) { 
        Swal.fire({
            "title":title,
            "text":content,
            "icon":"info",
            "showCancelButton":true,
            "cancelButtonText":"Cancelar",
            "confirmButtonText":"Registrar",
            "reverseButtons":true,
            "confirmButtonColor":"#dc3545",
        })
        .then((result) => {
            if (result.isConfirmed) {
                console.log(parameters.get('venta'))
                $.ajax({
                    url: url,
                    type: 'POST',
                    data: parameters,
                    dataType: 'json',
                    processData: false,
                    contentType: false,
                }).done (function (data){
                    console.log(data);
                    if (!data.hasOwnProperty('error')){
                        callback();
                        return false;
                    }
                    message_error(data.error);
                });
            }
        });
    }
</script>